buildPack: typescript
pipelineConfig:
  agent:
    image: gcr.io/jenkinsxio/builder-nodejs12x:latest
  env:
    - value: gcr.io
      name: DOCKER_REGISTRY
    - name: GIT_AUTHOR_EMAIL
      value: jenkins-x@googlegroups.com
    - name: GIT_AUTHOR_NAME
      value: jenkins-x-bot
    - name: GIT_COMMITTER_EMAIL
      value: jenkins-x@googlegroups.com
    - name: GIT_COMMITTER_NAME
      value: jenkins-x-bot
    - name: XDG_CONFIG_HOME
      value: /home/jenkins
  pipelines:
    overrides:
      - pipeline: pullRequest
        name: npm-install
        steps:
          - sh: npm install
            name: npm-install
          - sh: npm run build-prod
            name: npm-build
      - pipeline: release
        name: npm-install
        steps:
          - sh: npm install
            name: npm-install
          - sh: npm run build-prod
            name: npm-build

